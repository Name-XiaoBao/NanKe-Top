import{g as k,a as C}from"./api-bcd6585b.js";import{_ as R,r as d,a as r,o as c,c as u,w as _,s as D,b as t,d as v,e as b,f as V,F as z,t as m,g as p}from"./index-ca32026e.js";const L={setup(){const f=d(!1),a=d(null),n=d([]),s=()=>{k().then(e=>{h.value=e.data,C().then(i=>{l.value=i.data,n.value=i.data,f.value=!1,D("刷新成功")}).catch(i=>{console.error(i)})}).catch(e=>{console.log(e)})},h=d([]),l=d([]),y=e=>{window.open(e)};k().then(e=>{h.value=e.data}).catch(e=>{console.log(e)}),C().then(e=>{l.value=e.data,n.value=e.data}).catch(e=>{console.error(e)});const g=d(0);return{loading:f,onRefresh:s,swipe:h,CarouselClick:y,search_vote:a,voting:l,vote_item:n,active:g,searchClick:()=>{a.value?n.value=l.value.filter(e=>e.title.includes(a.value)):n.value=l.value},clearClick:()=>{a.value=null,n.value=l.value}}}},N={style:{"padding-bottom":"10px"}},S={style:{margin:"10px"}},F={style:{"margin-top":"15px"}},H=t("br",null,null,-1),T=["src"],U={style:{display:"flex","align-items":"center"}},q=t("b",{style:{margin:"10px 10px 15px"}},"热门投票",-1),E={class:"voting"},j=["src"],A={style:{margin:"10px"}},G={class:"parent"},I={style:{"font-weight":"bold"}},J={class:"parent",style:{"padding-bottom":"15px"}},K=["src"],M={class:"name"},O={class:"right-span browse"},P={style:{"margin-left":"10px","font-size":"15px"}},Q={style:{color:"#0076ff"}};function W(f,a,n,s,h,l){const y=r("van-search"),g=r("van-swipe-item"),w=r("van-swipe"),x=r("van-icon"),e=r("van-tag"),i=r("router-link"),B=r("van-pull-refresh");return c(),u(B,{modelValue:s.loading,"onUpdate:modelValue":a[1]||(a[1]=o=>s.loading=o),onRefresh:s.onRefresh},{default:_(()=>[t("div",N,[t("div",S,[t("div",F,[v(y,{modelValue:s.search_vote,"onUpdate:modelValue":a[0]||(a[0]=o=>s.search_vote=o),style:{"border-radius":"15px","margin-bottom":"-5px"},placeholder:"请输入搜索关键词",onSearch:s.searchClick},null,8,["modelValue","onSearch"])]),H,v(w,{autoplay:3e3,"lazy-render":"",style:{"border-radius":"10px"}},{default:_(()=>[(c(!0),b(z,null,V(s.swipe,o=>(c(),u(g,{key:o,onClick:X=>s.CarouselClick(o.url)},{default:_(()=>[t("img",{src:o.img,style:{width:"100%",height:"200px"}},null,8,T)]),_:2},1032,["onClick"]))),128))]),_:1}),t("div",U,[v(x,{name:"fire-o"}),q]),(c(!0),b(z,null,V(s.vote_item,o=>(c(),u(i,{to:{path:"/vote",query:{uid:o.uid}},style:{color:"#000"}},{default:_(()=>[t("div",E,[t("img",{src:o.cover,style:{width:"100%",height:"200px","border-radius":"10px"}},null,8,j),t("div",A,[t("div",G,[t("p",I,m(o.title),1),new Date(o.deadline)>new Date?(c(),u(e,{key:0,type:"primary",size:"medium"},{default:_(()=>[p("进行中")]),_:1})):(c(),u(e,{key:1,type:"danger",size:"medium"},{default:_(()=>[p("已结束")]),_:1}))]),t("div",J,[t("img",{style:{width:"20px",height:"20px","border-radius":"50%"},src:o.avatar},null,8,K),t("span",M,m(o.nickname),1),t("span",O,[v(x,{name:"eye-o",style:{"margin-right":"5px"}}),p(m(o.views)+"浏览",1)]),t("span",P,[p("已投"),t("span",Q,m(o.votes),1),p("票")])])])])]),_:2},1032,["to"]))),256))])])]),_:1},8,["modelValue","onRefresh"])}const $=R(L,[["render",W]]);export{$ as default};
